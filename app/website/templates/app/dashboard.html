{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}
{% block content %}
  <p>Welcome to your dashboard <span class="text-red-500">âœ¨{{ request.user.first_name|default:request.user.username|title }}âœ¨</span></p>
 
  <div x-data="budgets()" x-init="loadBudgets()">
    <h2 class="text-sm font-medium text-gray-500">Budgets</h2>
    <ul role="list" class="mt-3 grid grid-cols-1 gap-5 sm:grid-cols-2 sm:gap-6 lg:grid-cols-4">
      <template x-for="budget in budgets">
      <li class="col-span-1 flex rounded-md shadow-sm">
        <div class="flex-shrink-0 flex items-center justify-center w-16 bg-red-400 text-white text-xl font-medium rounded-l-md">ðŸ’°</div>
        <div class="flex flex-1 items-center justify-between truncate rounded-r-md border-t border-r border-b border-gray-200 bg-white">
          <div class="flex-1 px-4 py-2 text-sm">
            <a x-text="budget.name" href="#" class="font-medium text-gray-900 hover:text-gray-600"></a>
            <p class="text-gray-500">16 Members</p>
          </div>
        </div>
      </li>
    </template>

    </ul>
  </div>
  
{% endblock %}

{% block alpine %}

<script>
  function budgets() {
      return {
          budgets: [],
          loadBudgets() {
            let self = this;
            axios.get("api/budgets/")
              .then(function (response) {
                // handle success
                self.budgets = response.data.results;
              })
              .catch(function (error) {
                // handle error
                console.log(error);
              });
          },
          addBudget() {},
          deleteBudget(budgetID) {},
          updateBudget() {},
      }
  }
</script>

{% endblock %}